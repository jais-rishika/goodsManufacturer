import{r as T,j as e,x as m,d as I,I as S,B as b,C as L,i as v,P as U}from"./index-D1Wk5fvR.js";const R="_Top_vitg1_1",f="_Filter_vitg1_8",O="_ToolsCard_vitg1_38",N="_Line_vitg1_49",j={Top:R,Filter:f,ToolsCard:O,Line:N},A={isLoading:!1,error:"",ToolInventoryData:[],selectedTool:null,selectedFilters:[],searchValue:"",count:0,urlFilter:"page=0&size=5"},Q=(l,t)=>{switch(t.type){case"UPDATE_TOOLS":return{...l,ToolInventoryData:t.data};case"SELECT_TOOL":return{...l,selectedTool:t.data};case"SET_COUNT":return{...l,count:t.count};case"SET_FILTERS":return{...l,selectedFilters:t.data};case"SET_SEARCH":return{...l,searchValue:t.data};case"SET_URL_FILTER":return{...l,urlFilter:t.data};default:return l}},_=T.createContext(null),w=l=>t=>{const[a,i]=T.useReducer(Q,A),g=n=>{if(n.includes("isPerishable")&&n.includes("notPerishable")){const r=n.findIndex(h=>h==="isPerishable"),o=n.findIndex(h=>h==="notPerishable");r>o?n.splice(o,1):n.splice(r,1)}i({type:"SET_FILTERS",data:n})},y=(n,r)=>{const o=new URLSearchParams(a.urlFilter);o.set("size",`${n}`),o.set("page",`${r}`),u(o.toString())},c=n=>{i({type:"SET_SEARCH",data:n})},u=n=>{const r=new URLSearchParams(n),[o,h]=[r.get("size"),r.get("page")],x=new URLSearchParams;x.set("page",`${h}`),x.set("size",`${o}`),x.set("name",a.searchValue);let E="";a.selectedFilters.includes("isPerishable")&&(E+="&isPerishable=true"),a.selectedFilters.includes("notPerishable")&&(E+="&isPerishable=false");let F="";a.selectedFilters.includes("special")&&(F+="&category=SPECIAL"),a.selectedFilters.includes("normal")&&(F+="&category=NORMAL");const P=x.toString()+F+E;i({type:"SET_URL_FILTER",data:P}),p(P)},d=n=>{i({type:"SET_COUNT",count:n})},p=async n=>{try{const r=await m(n);i({type:"UPDATE_TOOLS",data:r.content}),d(r.page.totalElements),d(r.page.totalElements)}catch{}},s={getData:p,setSelected:n=>{i({type:"SELECT_TOOL",data:n})},updateUrl:u,handleFilterChange:g,handleUrlChange:y,updateSearch:c,setCount:d};return e.jsx(_.Provider,{value:{...a,...s},children:e.jsx(l,{...t})})},D=({})=>{const{ToolInventoryData:l,getData:t,updateUrl:a,searchValue:i,selectedFilters:g,count:y,urlFilter:c,handleUrlChange:u,handleFilterChange:d,updateSearch:p}=T.useContext(_),C=()=>{a(c)};return T.useEffect(()=>{t(c)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:j.Top,children:e.jsx("div",{children:e.jsxs("div",{className:j.Filter,children:[e.jsx("label",{children:e.jsx(I,{selectedFilters:g,handleFilter:d,availFilters:["name","special","normal","isPerishable","notPerishable"],getData:t,url:c})}),e.jsx(S,{type:"text",placeholder:"search",defaultValue:i,onChange:s=>p(s.target.value)}),e.jsx(b,{primary:!0,onClick:C,children:"Filter"})]})})}),e.jsx("div",{className:j.ToolsCard,children:l.length>0&&l.map(s=>e.jsxs(L,{id:s.toolId,photo:s.toolImageUrl||v,children:[e.jsxs("p",{children:[e.jsx("span",{children:"Name:"}),e.jsx("span",{children:s.toolName})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Fine:"}),e.jsx("span",{children:s.fineAmount})]}),!s.isPerishable&&e.jsxs("p",{children:[e.jsx("span",{children:"Return Period:"}),e.jsx("span",{children:s.returnPeriod})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Category:"}),e.jsx("span",{children:s.toolCategory})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Perishable:"}),e.jsx("span",{children:s.isPerishable?"YES":"NO"})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Total:"}),e.jsx("span",{children:s.totalQuantity})]}),e.jsx("div",{className:j.Line}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{children:"Allocated:"}),e.jsx("span",{children:s.totalQuantity-s.availableQuantity-s.brokenQuantity?s.brokenQuantity:0})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Pending:"}),e.jsx("span",{children:s.availableQuantity})]}),e.jsxs("p",{children:[e.jsx("span",{children:"Broken:"}),e.jsx("span",{children:s.brokenQuantity?s.brokenQuantity:0})]})]})]}))}),e.jsx(U,{count:y,setUrl:u,url:c,getData:t})]})},z=w(D);export{z as default};
