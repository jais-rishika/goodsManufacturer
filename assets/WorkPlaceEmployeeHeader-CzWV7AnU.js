import{r as i,j as e,y as m,M as x,I as g,B as h,u as p,N as j}from"./index-q3AqL9l-.js";import{a as N,e as _}from"./auth.service-BeOEEX26.js";const v="_Header_1grai_2",y="_HeaderLeft_1grai_15",w="_Nav_1grai_21",C="_Active_1grai_34",M="_Profile_1grai_41",P="_ProfileDiv_1grai_46",k="_Show_1grai_52",I="_Modal_1grai_79",o={Header:v,HeaderLeft:y,Nav:w,Active:C,Profile:M,ProfileDiv:P,Show:k,Modal:I},A={modalStatus:!1,userData:null},H=(r,t)=>{switch(t.type){case"MODAL":return{...r,modalStatus:!r.modalStatus};case"USER_DATA":return{...r,userData:t.data};default:return{...r}}},u=i.createContext(null),L=r=>t=>{const[n,l]=i.useReducer(H,A),c={handleModal:()=>{l({type:"MODAL"})},getUserData:async()=>{try{const s=await N();console.log("fa",s),l({type:"USER_DATA",data:s})}catch{m.error("Couldn't fetch your Details")}}};return e.jsx(u.Provider,{value:{...n,...c},children:e.jsx(r,{...t})})},D=()=>{const r=i.useRef(null),{handleModal:t}=i.useContext(u),n=async()=>{var l,a;try{if(((a=(l=r.current)==null?void 0:l.files)==null?void 0:a.length)===0)return alert("No image added");const c=r.current.files.item(0),s=new FormData;s.append("file",c),await _(s),m.success("Profile Image Uploaded")}catch{m.error("Profile Image Upload Failed")}finally{t()}};return e.jsx("div",{className:o.Modal,children:e.jsxs(x,{setShowModal:t,children:[e.jsx("h2",{children:"Upload Image"}),e.jsx(g,{type:"file",placeholder:"upload Image",ref:r}),e.jsx(h,{primary:!0,onClick:n,children:"UPLOAD"})]})})},U=({links:r})=>{const{handleModal:t,modalStatus:n,getUserData:l,userData:a}=i.useContext(u),d=p(),c=()=>{localStorage.removeItem("token"),d("/")};return i.useEffect(()=>{l()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:o.Header,children:[e.jsx("div",{className:o.HeaderLeft,children:e.jsx("h1",{children:"GoodsManufacturer"})}),e.jsx("nav",{children:e.jsx("ul",{className:o.Nav,children:r.map(s=>e.jsx(j,{className:({isActive:f})=>f?o.Active:"",to:`${s.link}`,end:!0,children:e.jsx("li",{children:s.title})}))})}),e.jsxs("section",{className:o.Profile,children:[e.jsx("div",{className:o.ProfileDiv,children:"P"}),e.jsxs("div",{className:o.Show,children:[e.jsxs("div",{children:[e.jsx("h4",{children:"LOCATION"}),(a==null?void 0:a.facilityName)&&e.jsxs("p",{children:["facilityName: ",a.facilityName]}),(a==null?void 0:a.workstationCode)&&e.jsxs("p",{children:["workstationCode: ",a.workstationCode]}),(a==null?void 0:a.toolCribName)&&e.jsxs("p",{children:["toolCribName: ",a.toolCribName]}),(a==null?void 0:a.workplaceName)&&e.jsxs("p",{children:["workplaceName: ",a.workplaceName]})]}),e.jsx(h,{primary:!0,onClick:t,children:"Upload Image"}),e.jsx(h,{primary:!0,onClick:c,children:"Log out"})]})]})]}),n&&e.jsx(D,{})]})},R=L(U);export{R as W};
